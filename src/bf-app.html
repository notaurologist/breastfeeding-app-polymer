<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="bf-timer.html">

<dom-module id="bf-app">
  <iron-localstorage name="bf-storage"></iron-localstorage>
  <template>
    <bf-timer on-stop="_handleTimerStop"></bf-timer>
  </template>

  <script>
    // TODO: All data really tied to one event,
    // so stop listening to multiple. Consolidate.

    // TODO: Store data somewhere better than localStorage.
    Polymer({
      is: 'bf-app',

      properties: {
        feeding: Object,
      },

      /**
       * Handle results of the timer.
       *
       * @param {Object} evt Event data
       */
      _handleTimerStop: function (evt) {
        let {minutes, side} = evt.detail;

        // Don't store anything if we didn't even get to a minute
        if (minutes > 0) {
          window.localStorage.setItem('bf-storage', JSON.stringify({
            minutes,
            side,
          }));
        }
      },
    });
  </script>
</dom-module>
